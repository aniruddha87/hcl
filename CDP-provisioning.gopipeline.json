{ 
 	"name": "CDP-Provisioning", 
 	"group": "POC", 
 	"enable_pipeline_locking": true, 
 	"environment_variables": [],
	"materials": [{ 
 		"url": "https://github.com/aniruddha87/hcl.git", 
 		"type": "git", 
 		"name": "mygit" 
	}], 
	"parameters": [{
		"ansible_home": "/home/cdp/anirban/workspace-np-r2/Production",
		"services": "environment/aws_services",
		"ec2": "environment/ec2_provision",
		"site": "CDP",
		"site_id": "M",
		"softwares": "softwares/playbooks"
		}],
 	"stages": [
	{ 
		"name": "MGMT-server-stage",
		"jobs": [
		{
			"name": "MGMT-server-Job",
			"resources": ["ip-10-0-4-33"],
			"tasks": [
				{
				"type": "exec",
				"run_if": "passed",
				"on_cancel" : null,
				"command": "echo",
				"arguments": "Hello",
				"working_directory": null
				},
				{
				"type": "script",
				"run_if": "passed",
				"on_cancel" : null,
				"command": "echo",
				"arguments": [ "sudo su - cdp -c", "cd #{ansible_home}/#{ec2};ansible-playbook ec2-provision.yml -e type=servers -e site1=#{site}  -e site2=#{environment} -e site_id=#{site_id} --tags \"cdp_instance\" -v" ],
				"working_directory": null
				}]
		}]
	},
	{
		"name": "MGMT-GO-STAGE",
		"jobs": [
		{
			"name": "MGMT-GO-STAGE",
			"resources": ["ip-10-0-4-33"],
			"tasks": [ 
				{
				"type": "script",
				"run_if": "passed",
				"on_cancel" : null,
				"command": "echo",
				"arguments": "Installing softwares",
				"working_directory": null
				},
				{
				"type": "script",
				"run_if": "passed",
				"on_cancel" : null,
				"command": "echo",
				"arguments": [ "sudo su - cdp -c ","cd #{ansible_home}/#{softwares};ansible-playbook cdp.yml -i inventory/hosts_#{environment} -e type=softwares -e site1=#{site} -e site2=#{environment} -e site_id=#{site_id} --tags \"cdp_instance\" -v" ],
				"working_directory": null
				}]
			
		}]
	}]
}	
